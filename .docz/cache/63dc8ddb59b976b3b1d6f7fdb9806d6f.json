{"remainingRequest":"/Users/dusty/Code/parkbench/odin-web/node_modules/thread-loader/dist/cjs.js??ref--5-1!/Users/dusty/Code/parkbench/odin-web/node_modules/babel-loader/lib/index.js??ref--5-2!/Users/dusty/Code/parkbench/odin-web/node_modules/source-map-loader/index.js!/Users/dusty/Code/parkbench/odin-web/src/components/angular-component.js","dependencies":[{"path":"/Users/dusty/Code/parkbench/odin-web/src/components/angular-component.js","mtime":1567098716261},{"path":"/Users/dusty/Code/parkbench/odin-web/node_modules/docz/node_modules/cache-loader/dist/cjs.js","mtime":1557854551322},{"path":"/Users/dusty/Code/parkbench/odin-web/node_modules/thread-loader/dist/cjs.js","mtime":1565388327920},{"path":"/Users/dusty/Code/parkbench/odin-web/node_modules/babel-loader/lib/index.js","mtime":1557854551208},{"path":"/Users/dusty/Code/parkbench/odin-web/node_modules/source-map-loader/index.js","mtime":1555547971189}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIi9Vc2Vycy9kdXN0eS9Db2RlL3BhcmtiZW5jaC9vZGluLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiO2ltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMgZnJvbSIvVXNlcnMvZHVzdHkvQ29kZS9wYXJrYmVuY2gvb2Rpbi13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIjsoZnVuY3Rpb24oKXt2YXIgZW50ZXJNb2R1bGU9dHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsIT09J3VuZGVmaW5lZCc/cmVhY3RIb3RMb2FkZXJHbG9iYWwuZW50ZXJNb2R1bGU6dW5kZWZpbmVkO2VudGVyTW9kdWxlJiZlbnRlck1vZHVsZShtb2R1bGUpO30pKCk7ZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsZW51bWVyYWJsZU9ubHkpe3ZhciBrZXlzPU9iamVjdC5rZXlzKG9iamVjdCk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHN5bWJvbHM9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpO2lmKGVudW1lcmFibGVPbmx5KXN5bWJvbHM9c3ltYm9scy5maWx0ZXIoZnVuY3Rpb24oc3ltKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3Qsc3ltKS5lbnVtZXJhYmxlO30pO2tleXMucHVzaC5hcHBseShrZXlzLHN5bWJvbHMpO31yZXR1cm4ga2V5czt9ZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpe2Zvcih2YXIgaT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe3ZhciBzb3VyY2U9YXJndW1lbnRzW2ldIT1udWxsP2FyZ3VtZW50c1tpXTp7fTtpZihpJTIpe293bktleXMoc291cmNlLHRydWUpLmZvckVhY2goZnVuY3Rpb24oa2V5KXtfZGVmaW5lUHJvcGVydHkodGFyZ2V0LGtleSxzb3VyY2Vba2V5XSk7fSk7fWVsc2UgaWYoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpe09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTt9ZWxzZXtvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbihrZXkpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsa2V5LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLGtleSkpO30pO319cmV0dXJuIHRhcmdldDt9dmFyIF9fc2lnbmF0dXJlX189dHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsIT09J3VuZGVmaW5lZCc/cmVhY3RIb3RMb2FkZXJHbG9iYWwuZGVmYXVsdC5zaWduYXR1cmU6ZnVuY3Rpb24oYSl7cmV0dXJuIGE7fTtpbXBvcnQgUmVhY3QgZnJvbSdyZWFjdCc7aW1wb3J0IGFuZ3VsYXIgZnJvbSdhbmd1bGFyJztpbXBvcnQga2ViYWJDYXNlIGZyb20nbG9kYXNoL2tlYmFiQ2FzZSc7aW1wb3J0e3dpdGhSb3V0ZXJ9ZnJvbSdyZWFjdC1yb3V0ZXItZG9tJztpbXBvcnR7dXNlRGVlcENvbXBhcmVFZmZlY3ROb0NoZWNrfWZyb20ndXNlLWRlZXAtY29tcGFyZS1lZmZlY3QnO2ltcG9ydHtnZXRJbmplY3Rvcn1mcm9tJ0AvYW5ndWxhci9pbmplY3Rvcic7ZXhwb3J0IHZhciBBbmd1bGFyQ29tcG9uZW50QmFzZT1mdW5jdGlvbiBBbmd1bGFyQ29tcG9uZW50QmFzZShfcmVmKXt2YXIgY29tcG9uZW50PV9yZWYuY29tcG9uZW50LF9yZWYkbG9jYXRpb249X3JlZi5sb2NhdGlvbixsb2NhdGlvbj1fcmVmJGxvY2F0aW9uPT09dm9pZCAwP3t9Ol9yZWYkbG9jYXRpb24sX3JlZiRtYXRjaD1fcmVmLm1hdGNoLG1hdGNoPV9yZWYkbWF0Y2g9PT12b2lkIDA/e306X3JlZiRtYXRjaCxwcm9wcz1fb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZixbImNvbXBvbmVudCIsImxvY2F0aW9uIiwibWF0Y2giXSk7dmFyIHNjb3BlUmVmPVJlYWN0LnVzZVJlZigpO3ZhciByZWY9UmVhY3QudXNlUmVmKCk7dXNlRGVlcENvbXBhcmVFZmZlY3ROb0NoZWNrKGZ1bmN0aW9uKCl7cmVuZGVyQW5ndWxhcigpO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBkZXN0cm95U2NvcGUoKTt9O30sW2NvbXBvbmVudCxsb2NhdGlvbi5zZWFyY2gsbWF0Y2gucGFyYW1zXSk7ZnVuY3Rpb24gZGVzdHJveVNjb3BlKCl7aWYoc2NvcGVSZWYuY3VycmVudClzY29wZVJlZi5jdXJyZW50LiRkZXN0cm95KCk7fWZ1bmN0aW9uIHJlbmRlckFuZ3VsYXIoKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZGVzdHJveVNjb3BlKCk7dmFyIGVsZW1lbnQ9a2ViYWJDYXNlKGNvbXBvbmVudCk7dmFyIG1hdGNoUGFyYW1zPW1hdGNoLnBhcmFtc3x8e307dmFyIHBhcmFtcz1fb2JqZWN0U3ByZWFkKHt9LHByb3BzLHt9LG1hdGNoUGFyYW1zKTt2YXIgYXR0cnM9T2JqZWN0LmtleXMocGFyYW1zKS5tYXAoZnVuY3Rpb24oa2V5KXtyZXR1cm4iIi5jb25jYXQoa2ViYWJDYXNlKGtleSksIj1cIiIpLmNvbmNhdChrZXksIlwiIik7fSk7dmFyIHRlbXBsYXRlPSI8Ii5jb25jYXQoZWxlbWVudCwiICIpLmNvbmNhdChhdHRycy5qb2luKCcgJyksIj48LyIpLmNvbmNhdChlbGVtZW50LCI+Iik7dmFyIGVsPWFuZ3VsYXIuZWxlbWVudChyZWYuY3VycmVudCk7Z2V0SW5qZWN0b3IoKS5pbnZva2UoWyckY29tcGlsZScsJyRyb290U2NvcGUnLGZ1bmN0aW9uKCRjb21waWxlLCRyb290U2NvcGUpe2VsLmVtcHR5KCk7c2NvcGVSZWYuY3VycmVudD1hbmd1bGFyLmV4dGVuZCgkcm9vdFNjb3BlLiRuZXcoKSxwYXJhbXMpO3ZhciBlbGVtZW50PSRjb21waWxlKHRlbXBsYXRlKShzY29wZVJlZi5jdXJyZW50KTtlbC5hcHBlbmQoZWxlbWVudCk7c2NvcGVSZWYuY3VycmVudC4kZGlnZXN0KCk7fV0pO30sMCk7fXJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLHtyZWY6cmVmfSk7fTtfX3NpZ25hdHVyZV9fKEFuZ3VsYXJDb21wb25lbnRCYXNlLCJ1c2VSZWZ7c2NvcGVSZWZ9XG51c2VSZWZ7cmVmfVxudXNlRGVlcENvbXBhcmVFZmZlY3ROb0NoZWNre30iLGZ1bmN0aW9uKCl7cmV0dXJuW3VzZURlZXBDb21wYXJlRWZmZWN0Tm9DaGVja107fSk7aWYodHlwZW9mIEFuZ3VsYXJDb21wb25lbnRCYXNlIT09J3VuZGVmaW5lZCcmJkFuZ3VsYXJDb21wb25lbnRCYXNlJiZBbmd1bGFyQ29tcG9uZW50QmFzZT09PU9iamVjdChBbmd1bGFyQ29tcG9uZW50QmFzZSkmJk9iamVjdC5pc0V4dGVuc2libGUoQW5ndWxhckNvbXBvbmVudEJhc2UpKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoQW5ndWxhckNvbXBvbmVudEJhc2UsJ19fZmlsZW1ldGEnLHtlbnVtZXJhYmxlOnRydWUsY29uZmlndXJhYmxlOnRydWUsdmFsdWU6e25hbWU6IkFuZ3VsYXJDb21wb25lbnRCYXNlIixmaWxlbmFtZToic3JjL2NvbXBvbmVudHMvYW5ndWxhci1jb21wb25lbnQuanMifX0pO31leHBvcnQgdmFyIEFuZ3VsYXJDb21wb25lbnQ9d2l0aFJvdXRlcihBbmd1bGFyQ29tcG9uZW50QmFzZSk7aWYodHlwZW9mIEFuZ3VsYXJDb21wb25lbnQhPT0ndW5kZWZpbmVkJyYmQW5ndWxhckNvbXBvbmVudCYmQW5ndWxhckNvbXBvbmVudD09PU9iamVjdChBbmd1bGFyQ29tcG9uZW50KSYmT2JqZWN0LmlzRXh0ZW5zaWJsZShBbmd1bGFyQ29tcG9uZW50KSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KEFuZ3VsYXJDb21wb25lbnQsJ19fZmlsZW1ldGEnLHtlbnVtZXJhYmxlOnRydWUsY29uZmlndXJhYmxlOnRydWUsdmFsdWU6e25hbWU6IkFuZ3VsYXJDb21wb25lbnQiLGZpbGVuYW1lOiJzcmMvY29tcG9uZW50cy9hbmd1bGFyLWNvbXBvbmVudC5qcyJ9fSk7fTsoZnVuY3Rpb24oKXt2YXIgcmVhY3RIb3RMb2FkZXI9dHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsIT09J3VuZGVmaW5lZCc/cmVhY3RIb3RMb2FkZXJHbG9iYWwuZGVmYXVsdDp1bmRlZmluZWQ7aWYoIXJlYWN0SG90TG9hZGVyKXtyZXR1cm47fXJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKEFuZ3VsYXJDb21wb25lbnRCYXNlLCJBbmd1bGFyQ29tcG9uZW50QmFzZSIsIi9Vc2Vycy9kdXN0eS9Db2RlL3BhcmtiZW5jaC9vZGluLXdlYi9zcmMvY29tcG9uZW50cy9hbmd1bGFyLWNvbXBvbmVudC5qcyIpO3JlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKEFuZ3VsYXJDb21wb25lbnQsIkFuZ3VsYXJDb21wb25lbnQiLCIvVXNlcnMvZHVzdHkvQ29kZS9wYXJrYmVuY2gvb2Rpbi13ZWIvc3JjL2NvbXBvbmVudHMvYW5ndWxhci1jb21wb25lbnQuanMiKTt9KSgpOzsoZnVuY3Rpb24oKXt2YXIgbGVhdmVNb2R1bGU9dHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsIT09J3VuZGVmaW5lZCc/cmVhY3RIb3RMb2FkZXJHbG9iYWwubGVhdmVNb2R1bGU6dW5kZWZpbmVkO2xlYXZlTW9kdWxlJiZsZWF2ZU1vZHVsZShtb2R1bGUpO30pKCk7"},{"version":3,"sources":["/Users/dusty/Code/parkbench/odin-web/src/components/angular-component.js"],"names":["React","angular","kebabCase","withRouter","useDeepCompareEffectNoCheck","getInjector","AngularComponentBase","component","location","match","props","scopeRef","useRef","ref","renderAngular","destroyScope","search","params","current","$destroy","setTimeout","element","matchParams","attrs","Object","keys","map","key","template","join","el","invoke","$compile","$rootScope","empty","extend","$new","append","$digest","AngularComponent"],"mappings":"iyCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAOC,CAAAA,OAAP,KAAoB,SAApB,CACA,MAAOC,CAAAA,SAAP,KAAsB,kBAAtB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,2BAAT,KAA4C,yBAA5C,CACA,OAASC,WAAT,KAA4B,oBAA5B,CAEA,MAAO,IAAMC,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,MAK9B,IAJJC,CAAAA,SAII,MAJJA,SAII,oBAHJC,QAGI,CAHJA,QAGI,wBAHO,EAGP,+BAFJC,KAEI,CAFJA,KAEI,qBAFI,EAEJ,YADDC,KACC,iEACJ,GAAMC,CAAAA,QAAQ,CAAGX,KAAK,CAACY,MAAN,EAAjB,CACA,GAAMC,CAAAA,GAAG,CAAGb,KAAK,CAACY,MAAN,EAAZ,CAEAR,2BAA2B,CAAC,UAAM,CAChCU,aAAa,GACb,MAAO,kBAAMC,CAAAA,YAAY,EAAlB,EAAP,CACD,CAH0B,CAGxB,CAACR,SAAD,CAAYC,QAAQ,CAACQ,MAArB,CAA6BP,KAAK,CAACQ,MAAnC,CAHwB,CAA3B,CAKA,QAASF,CAAAA,YAAT,EAAwB,CACtB,GAAIJ,QAAQ,CAACO,OAAb,CAAsBP,QAAQ,CAACO,OAAT,CAAiBC,QAAjB,GACvB,CAED,QAASL,CAAAA,aAAT,EAAyB,CACvBM,UAAU,CAAC,UAAM,CACfL,YAAY,GACZ,GAAMM,CAAAA,OAAO,CAAGnB,SAAS,CAACK,SAAD,CAAzB,CACA,GAAMe,CAAAA,WAAW,CAAGb,KAAK,CAACQ,MAAN,EAAgB,EAApC,CACA,GAAMA,CAAAA,MAAM,kBAAQP,KAAR,IAAkBY,WAAlB,CAAZ,CACA,GAAMC,CAAAA,KAAK,CAAGC,MAAM,CAACC,IAAP,CAAYR,MAAZ,EAAoBS,GAApB,CAAwB,SAAAC,GAAG,kBAAOzB,SAAS,CAACyB,GAAD,CAAhB,eAA0BA,GAA1B,QAA3B,CAAd,CACA,GAAMC,CAAAA,QAAQ,YAAOP,OAAP,aAAkBE,KAAK,CAACM,IAAN,CAAW,GAAX,CAAlB,eAAuCR,OAAvC,KAAd,CAEA,GAAMS,CAAAA,EAAE,CAAG7B,OAAO,CAACoB,OAAR,CAAgBR,GAAG,CAACK,OAApB,CAAX,CACAb,WAAW,GAAG0B,MAAd,CAAqB,CACnB,UADmB,CAEnB,YAFmB,CAGnB,SAACC,QAAD,CAAWC,UAAX,CAA0B,CACxBH,EAAE,CAACI,KAAH,GACAvB,QAAQ,CAACO,OAAT,CAAmBjB,OAAO,CAACkC,MAAR,CAAeF,UAAU,CAACG,IAAX,EAAf,CAAkCnB,MAAlC,CAAnB,CACA,GAAMI,CAAAA,OAAO,CAAGW,QAAQ,CAACJ,QAAD,CAAR,CAAmBjB,QAAQ,CAACO,OAA5B,CAAhB,CACAY,EAAE,CAACO,MAAH,CAAUhB,OAAV,EACAV,QAAQ,CAACO,OAAT,CAAiBoB,OAAjB,GACD,CATkB,CAArB,EAWD,CApBS,CAoBP,CApBO,CAAV,CAqBD,CACD,MAAO,4BAAK,GAAG,CAAEzB,GAAV,EAAP,CACD,CA1CM,C,cAAMP,oB,kFASXF,2B,0VAyCF,MAAO,IAAMmC,CAAAA,gBAAgB,CAAGpC,UAAU,CAACG,oBAAD,CAAnC,C,8dAlDMA,oB,4HAkDAiC,gB","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport angular from 'angular'\nimport kebabCase from 'lodash/kebabCase'\nimport { withRouter } from 'react-router-dom'\nimport { useDeepCompareEffectNoCheck } from 'use-deep-compare-effect'\nimport { getInjector } from '@/angular/injector'\n\nexport const AngularComponentBase = ({\n  component,\n  location = {},\n  match = {},\n  ...props\n}) => {\n  const scopeRef = React.useRef()\n  const ref = React.useRef()\n\n  useDeepCompareEffectNoCheck(() => {\n    renderAngular()\n    return () => destroyScope()\n  }, [component, location.search, match.params])\n\n  function destroyScope() {\n    if (scopeRef.current) scopeRef.current.$destroy()\n  }\n\n  function renderAngular() {\n    setTimeout(() => {\n      destroyScope()\n      const element = kebabCase(component)\n      const matchParams = match.params || {}\n      const params = { ...props, ...matchParams }\n      const attrs = Object.keys(params).map(key => `${kebabCase(key)}=\"${key}\"`)\n      const template = `<${element} ${attrs.join(' ')}></${element}>`\n\n      const el = angular.element(ref.current)\n      getInjector().invoke([\n        '$compile',\n        '$rootScope',\n        ($compile, $rootScope) => {\n          el.empty()\n          scopeRef.current = angular.extend($rootScope.$new(), params)\n          const element = $compile(template)(scopeRef.current)\n          el.append(element)\n          scopeRef.current.$digest()\n        }\n      ])\n    }, 0)\n  }\n  return <div ref={ref} />\n}\n\nAngularComponentBase.propTypes = {\n  component: PropTypes.string,\n  location: PropTypes.object,\n  match: PropTypes.object\n}\n\nexport const AngularComponent = withRouter(AngularComponentBase)\n"]}]}