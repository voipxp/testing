{"remainingRequest":"/Users/dusty/Code/parkbench/odin-web/node_modules/thread-loader/dist/cjs.js??ref--5-1!/Users/dusty/Code/parkbench/odin-web/node_modules/babel-loader/lib/index.js??ref--5-2!/Users/dusty/Code/parkbench/odin-web/node_modules/source-map-loader/index.js!/Users/dusty/Code/parkbench/odin-web/src/components/angular-component.js","dependencies":[{"path":"/Users/dusty/Code/parkbench/odin-web/src/components/angular-component.js","mtime":1565882327340},{"path":"/Users/dusty/Code/parkbench/odin-web/node_modules/docz/node_modules/cache-loader/dist/cjs.js","mtime":1557854551322},{"path":"/Users/dusty/Code/parkbench/odin-web/node_modules/thread-loader/dist/cjs.js","mtime":1565388327920},{"path":"/Users/dusty/Code/parkbench/odin-web/node_modules/babel-loader/lib/index.js","mtime":1557854551208},{"path":"/Users/dusty/Code/parkbench/odin-web/node_modules/source-map-loader/index.js","mtime":1555547971189}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvZHVzdHkvQ29kZS9wYXJrYmVuY2gvb2Rpbi13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyBmcm9tICIvVXNlcnMvZHVzdHkvQ29kZS9wYXJrYmVuY2gvb2Rpbi13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIjsKdmFyIF9qc3hGaWxlTmFtZSA9ICIvVXNlcnMvZHVzdHkvQ29kZS9wYXJrYmVuY2gvb2Rpbi13ZWIvc3JjL2NvbXBvbmVudHMvYW5ndWxhci1jb21wb25lbnQuanMiOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZW50ZXJNb2R1bGUgOiB1bmRlZmluZWQ7CiAgZW50ZXJNb2R1bGUgJiYgZW50ZXJNb2R1bGUobW9kdWxlKTsKfSkoKTsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKdmFyIF9fc2lnbmF0dXJlX18gPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZGVmYXVsdC5zaWduYXR1cmUgOiBmdW5jdGlvbiAoYSkgewogIHJldHVybiBhOwp9OwoKaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJzsKaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7CmltcG9ydCBrZWJhYkNhc2UgZnJvbSAnbG9kYXNoL2tlYmFiQ2FzZSc7CmltcG9ydCB7IHdpdGhSb3V0ZXIgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJzsKaW1wb3J0IHsgdXNlRGVlcENvbXBhcmVFZmZlY3ROb0NoZWNrIH0gZnJvbSAndXNlLWRlZXAtY29tcGFyZS1lZmZlY3QnOwppbXBvcnQgeyBnZXRJbmplY3RvciB9IGZyb20gJ0AvYW5ndWxhci9pbmplY3Rvcic7CmV4cG9ydCB2YXIgQW5ndWxhckNvbXBvbmVudEJhc2UgPSBmdW5jdGlvbiBBbmd1bGFyQ29tcG9uZW50QmFzZShfcmVmKSB7CiAgdmFyIGNvbXBvbmVudCA9IF9yZWYuY29tcG9uZW50LAogICAgICBfcmVmJGxvY2F0aW9uID0gX3JlZi5sb2NhdGlvbiwKICAgICAgbG9jYXRpb24gPSBfcmVmJGxvY2F0aW9uID09PSB2b2lkIDAgPyB7fSA6IF9yZWYkbG9jYXRpb24sCiAgICAgIF9yZWYkbWF0Y2ggPSBfcmVmLm1hdGNoLAogICAgICBtYXRjaCA9IF9yZWYkbWF0Y2ggPT09IHZvaWQgMCA/IHt9IDogX3JlZiRtYXRjaCwKICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgWyJjb21wb25lbnQiLCAibG9jYXRpb24iLCAibWF0Y2giXSk7CgogIHZhciBzY29wZVJlZiA9IFJlYWN0LnVzZVJlZigpOwogIHZhciByZWYgPSBSZWFjdC51c2VSZWYoKTsKICB1c2VEZWVwQ29tcGFyZUVmZmVjdE5vQ2hlY2soZnVuY3Rpb24gKCkgewogICAgcmVuZGVyQW5ndWxhcigpOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGRlc3Ryb3lTY29wZSgpOwogICAgfTsKICB9LCBbY29tcG9uZW50LCBsb2NhdGlvbi5zZWFyY2gsIG1hdGNoLnBhcmFtc10pOwoKICBmdW5jdGlvbiBkZXN0cm95U2NvcGUoKSB7CiAgICBpZiAoc2NvcGVSZWYuY3VycmVudCkgc2NvcGVSZWYuY3VycmVudC4kZGVzdHJveSgpOwogIH0KCiAgZnVuY3Rpb24gcmVuZGVyQW5ndWxhcigpIHsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBkZXN0cm95U2NvcGUoKTsKICAgICAgdmFyIGVsZW1lbnQgPSBrZWJhYkNhc2UoY29tcG9uZW50KTsKICAgICAgdmFyIG1hdGNoUGFyYW1zID0gbWF0Y2gucGFyYW1zIHx8IHt9OwoKICAgICAgdmFyIHBhcmFtcyA9IF9vYmplY3RTcHJlYWQoe30sIHByb3BzLCB7fSwgbWF0Y2hQYXJhbXMpOwoKICAgICAgdmFyIGF0dHJzID0gT2JqZWN0LmtleXMocGFyYW1zKS5tYXAoZnVuY3Rpb24gKGtleSkgewogICAgICAgIHJldHVybiAiIi5jb25jYXQoa2ViYWJDYXNlKGtleSksICI9XCIiKS5jb25jYXQoa2V5LCAiXCIiKTsKICAgICAgfSk7CiAgICAgIHZhciB0ZW1wbGF0ZSA9ICI8Ii5jb25jYXQoZWxlbWVudCwgIiAiKS5jb25jYXQoYXR0cnMuam9pbignICcpLCAiPjwvIikuY29uY2F0KGVsZW1lbnQsICI+Iik7CiAgICAgIHZhciBlbCA9IGFuZ3VsYXIuZWxlbWVudChyZWYuY3VycmVudCk7CiAgICAgIGdldEluamVjdG9yKCkuaW52b2tlKFsnJGNvbXBpbGUnLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uICgkY29tcGlsZSwgJHJvb3RTY29wZSkgewogICAgICAgIGVsLmVtcHR5KCk7CiAgICAgICAgc2NvcGVSZWYuY3VycmVudCA9IGFuZ3VsYXIuZXh0ZW5kKCRyb290U2NvcGUuJG5ldygpLCBwYXJhbXMpOwogICAgICAgIHZhciBlbGVtZW50ID0gJGNvbXBpbGUodGVtcGxhdGUpKHNjb3BlUmVmLmN1cnJlbnQpOwogICAgICAgIGVsLmFwcGVuZChlbGVtZW50KTsKICAgICAgICBzY29wZVJlZi5jdXJyZW50LiRkaWdlc3QoKTsKICAgICAgfV0pOwogICAgfSwgMCk7CiAgfQoKICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgcmVmOiByZWYsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA1MAogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0pOwp9OwoKX19zaWduYXR1cmVfXyhBbmd1bGFyQ29tcG9uZW50QmFzZSwgInVzZVJlZntzY29wZVJlZn1cbnVzZVJlZntyZWZ9XG51c2VEZWVwQ29tcGFyZUVmZmVjdE5vQ2hlY2t7fSIsIGZ1bmN0aW9uICgpIHsKICByZXR1cm4gW3VzZURlZXBDb21wYXJlRWZmZWN0Tm9DaGVja107Cn0pOwoKaWYgKHR5cGVvZiBBbmd1bGFyQ29tcG9uZW50QmFzZSAhPT0gJ3VuZGVmaW5lZCcgJiYgQW5ndWxhckNvbXBvbmVudEJhc2UgJiYgQW5ndWxhckNvbXBvbmVudEJhc2UgPT09IE9iamVjdChBbmd1bGFyQ29tcG9uZW50QmFzZSkgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShBbmd1bGFyQ29tcG9uZW50QmFzZSkpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQW5ndWxhckNvbXBvbmVudEJhc2UsICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJBbmd1bGFyQ29tcG9uZW50QmFzZSIsCiAgICAgIGZpbGVuYW1lOiAic3JjL2NvbXBvbmVudHMvYW5ndWxhci1jb21wb25lbnQuanMiCiAgICB9CiAgfSk7Cn0KCkFuZ3VsYXJDb21wb25lbnRCYXNlLnByb3BUeXBlcyA9IHsKICBjb21wb25lbnQ6IFByb3BUeXBlcy5zdHJpbmcsCiAgbG9jYXRpb246IFByb3BUeXBlcy5vYmplY3QsCiAgbWF0Y2g6IFByb3BUeXBlcy5vYmplY3QKfTsKZXhwb3J0IHZhciBBbmd1bGFyQ29tcG9uZW50ID0gd2l0aFJvdXRlcihBbmd1bGFyQ29tcG9uZW50QmFzZSk7CgppZiAodHlwZW9mIEFuZ3VsYXJDb21wb25lbnQgIT09ICd1bmRlZmluZWQnICYmIEFuZ3VsYXJDb21wb25lbnQgJiYgQW5ndWxhckNvbXBvbmVudCA9PT0gT2JqZWN0KEFuZ3VsYXJDb21wb25lbnQpICYmIE9iamVjdC5pc0V4dGVuc2libGUoQW5ndWxhckNvbXBvbmVudCkpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQW5ndWxhckNvbXBvbmVudCwgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogIkFuZ3VsYXJDb21wb25lbnQiLAogICAgICBmaWxlbmFtZTogInNyYy9jb21wb25lbnRzL2FuZ3VsYXItY29tcG9uZW50LmpzIgogICAgfQogIH0pOwp9Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciByZWFjdEhvdExvYWRlciA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5kZWZhdWx0IDogdW5kZWZpbmVkOwoKICBpZiAoIXJlYWN0SG90TG9hZGVyKSB7CiAgICByZXR1cm47CiAgfQoKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihBbmd1bGFyQ29tcG9uZW50QmFzZSwgIkFuZ3VsYXJDb21wb25lbnRCYXNlIiwgIi9Vc2Vycy9kdXN0eS9Db2RlL3BhcmtiZW5jaC9vZGluLXdlYi9zcmMvY29tcG9uZW50cy9hbmd1bGFyLWNvbXBvbmVudC5qcyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKEFuZ3VsYXJDb21wb25lbnQsICJBbmd1bGFyQ29tcG9uZW50IiwgIi9Vc2Vycy9kdXN0eS9Db2RlL3BhcmtiZW5jaC9vZGluLXdlYi9zcmMvY29tcG9uZW50cy9hbmd1bGFyLWNvbXBvbmVudC5qcyIpOwp9KSgpOwoKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgbGVhdmVNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwubGVhdmVNb2R1bGUgOiB1bmRlZmluZWQ7CiAgbGVhdmVNb2R1bGUgJiYgbGVhdmVNb2R1bGUobW9kdWxlKTsKfSkoKTs="},{"version":3,"sources":["/Users/dusty/Code/parkbench/odin-web/src/components/angular-component.js"],"names":["React","PropTypes","angular","kebabCase","withRouter","useDeepCompareEffectNoCheck","getInjector","AngularComponentBase","component","location","match","props","scopeRef","useRef","ref","renderAngular","destroyScope","search","params","current","$destroy","setTimeout","element","matchParams","attrs","Object","keys","map","key","template","join","el","invoke","$compile","$rootScope","empty","extend","$new","append","$digest","propTypes","string","object","AngularComponent"],"mappings":"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","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport angular from 'angular'\nimport kebabCase from 'lodash/kebabCase'\nimport { withRouter } from 'react-router-dom'\nimport { useDeepCompareEffectNoCheck } from 'use-deep-compare-effect'\nimport { getInjector } from '@/angular/injector'\n\nexport const AngularComponentBase = ({\n  component,\n  location = {},\n  match = {},\n  ...props\n}) => {\n  const scopeRef = React.useRef()\n  const ref = React.useRef()\n\n  useDeepCompareEffectNoCheck(() => {\n    renderAngular()\n    return () => destroyScope()\n  }, [component, location.search, match.params])\n\n  function destroyScope() {\n    if (scopeRef.current) scopeRef.current.$destroy()\n  }\n\n  function renderAngular() {\n    setTimeout(() => {\n      destroyScope()\n      const element = kebabCase(component)\n      const matchParams = match.params || {}\n      const params = { ...props, ...matchParams }\n      const attrs = Object.keys(params).map(key => `${kebabCase(key)}=\"${key}\"`)\n      const template = `<${element} ${attrs.join(' ')}></${element}>`\n\n      const el = angular.element(ref.current)\n      getInjector().invoke([\n        '$compile',\n        '$rootScope',\n        ($compile, $rootScope) => {\n          el.empty()\n          scopeRef.current = angular.extend($rootScope.$new(), params)\n          const element = $compile(template)(scopeRef.current)\n          el.append(element)\n          scopeRef.current.$digest()\n        }\n      ])\n    }, 0)\n  }\n  return <div ref={ref} />\n}\n\nAngularComponentBase.propTypes = {\n  component: PropTypes.string,\n  location: PropTypes.object,\n  match: PropTypes.object\n}\n\nexport const AngularComponent = withRouter(AngularComponentBase)\n"]}]}