<pbs-spinner loading="$ctrl.loading">
  <pbs-block module="$ctrl.module">
    <pbs-block-buttons if-module-update="$ctrl.module">
      <pbs-button-compact-edit title="Edit Fax Messaging"
        ng-click="$ctrl.edit()">
      </pbs-button-compact-edit>
    </pbs-block-buttons>
    <pbs-list>
      <pbs-list-item label="Active">
        <pbs-check-box checked="$ctrl.settings.isActive"></pbs-check-box>
      </pbs-list-item>
      <pbs-list-item label="phoneNumber">
        {{$ctrl.settings.phoneNumber}}
      </pbs-list-item>
      <pbs-list-item label="Extension">
        {{$ctrl.settings.extension}}
      </pbs-list-item>
      <pbs-list-item label="Alias"
        ng-repeat="i in [0,1,2]">
        {{ $ctrl.settings.aliases[i].phoneNumber}}
      </pbs-list-item>
    </pbs-list>
  </pbs-block>
</pbs-spinner>
<pbs-modal id="editUserFaxMessaging"
  title="Edit Settings">
  <pbs-form>
    <pbs-form-field label="Active">
      <label class="checkbox">
        <input type="checkbox"
          ng-model="$ctrl.editSettings.isActive"> Is Active
      </label>
    </pbs-form-field>
    <pbs-form-field label="phoneNumber"
      ng-if="$ctrl.hasPermission('Group')">
      <div class="select">
        <select ng-model="$ctrl.editSettings.phoneNumber"
          ng-options="number.min as number.min for number in $ctrl.availableNumbers"
          ng-change="$ctrl.setExtension()">
          <option value="">-- None --</option>
        </select>
      </div>
    </pbs-form-field>
    <pbs-form-field label="extension"
      ng-if="$ctrl.hasPermission('Group')">
      <input type="text"
        class="input"
        ng-model="$ctrl.editSettings.extension">
    </pbs-form-field>
    <pbs-form-field ng-if="$ctrl.hasPermission('Group')"
      label="Aliases">
      <div class="field has-addons"
        ng-repeat="i in [0,1,2]">
        <p class="control is-expanded">
          <input type="text"
            class="input"
            ng-model="$ctrl.editSettings.aliases[i].phoneNumber">
        </p>
        <p class="control">
          <a class="button is-static">@</a>
        </p>
        <p class="control">
          <div class="select"
            ng-class="{'is-loading': $ctrl.loading}">
            <select ng-model="$ctrl.editSettings.aliases[i].domain"
              ng-options="domain as domain for domain in $ctrl.domains.domains">
            </select>
          </div>
        </p>
      </div>
    </pbs-form-field>
  </pbs-form>
</pbs-modal>
