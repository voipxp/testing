<pbs-spinner loading="$ctrl.loading">
  <pbs-block title="Project Rooms">
    <pbs-block-buttons>
      <pbs-block-buttons>
        <pbs-button-compact-add ng-click="$ctrl.add()" title="Add New Project Room">
        </pbs-button-compact-add>
      </pbs-block-buttons>
    </pbs-block-buttons>

    <pbs-data-table
      columns="$ctrl.columns"
      items="$ctrl.projectRooms"
      is-compact="true"
      is-bordered="true"
      is-striped="true"
      limit-to="10"
      on-click="$ctrl.edit($event)"
    ></pbs-data-table>
  </pbs-block>
</pbs-spinner>

<pbs-modal
  id="editUserCollaborateProjectRoom"
  title="{{
    $ctrl.editProjectRoom.roomId
      ? 'Edit ' + $ctrl.editProjectRoom.roomName
      : 'New Project Room'
  }}"
>
  <pbs-form>
    <pbs-form-field-horizontal label="Room ID" ng-if="$ctrl.editProjectRoom.roomId">
      <div class="field has-addons">
        <p class="control is-expanded">
          <input type="text" class="input" ng-model="$ctrl.editProjectRoom.roomId" readonly />
        </p>
        <p class="control">
          <button
            class="button"
            ng-click="$ctrl.regenerate($ctrl.editProjectRoom.roomId)"
            title="Regenerate Room ID"
          >
            <span class="icon">
              <i class="fas fa-sync"></i>
            </span>
          </button>
        </p>
      </div>
    </pbs-form-field-horizontal>
    <pbs-form-field-horizontal label="Room Name">
      <input type="text" class="input" ng-model="$ctrl.editProjectRoom.roomName" required />
    </pbs-form-field-horizontal>
    <pbs-form-field-horizontal label="Notification">
      <pbs-input-select
        ng-model="$ctrl.editProjectRoom.attendeeNotification"
        ng-options="opt as opt for opt in $ctrl.options.attendeeNotification"
        ng-required="true"
      ></pbs-input-select>
    </pbs-form-field-horizontal>
    <pbs-input-checkbox
      label="End room session when owner departs"
      ng-model="$ctrl.editProjectRoom.endCollaborateRoomSessionOnOwnerExit"
    ></pbs-input-checkbox>
    <pbs-input-checkbox
      label="Owner required to start room session"
      ng-model="$ctrl.editProjectRoom.ownerRequired"
    ></pbs-input-checkbox>
  </pbs-form>
</pbs-modal>
