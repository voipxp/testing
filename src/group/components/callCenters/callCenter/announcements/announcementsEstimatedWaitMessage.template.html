<pbs-block title="Estimated Wait Message"
  class="margin-top">
  <pbs-block-buttons ng-if="$ctrl.canUpdate">
    <pbs-button-compact-edit title="Edit Estimated Wait"
      ng-click="$ctrl.edit('EstimatedWaitMessage')">
    </pbs-button-compact-edit>
  </pbs-block-buttons>
  <pbs-list>
    <pbs-list-item label="Estimated Wait Message Enabled">
      <pbs-check-box checked="$ctrl.announcements.estimatedWaitMessage.enabled"></pbs-check-box>
    </pbs-list-item>
    <pbs-list-item label="Play Updated Wait Message">
      <pbs-check-box checked="$ctrl.announcements.estimatedWaitMessage.playUpdatedEWM"></pbs-check-box>
      <span ng-show="$ctrl.announcements.estimatedWaitMessage.playUpdatedEWM">
        Every {{ $ctrl.announcements.estimatedWaitMessage.timeBetweenEWMUpdatesSeconds }} seconds
      </span>
    </pbs-list-item>
    <pbs-list-item label="Operating Mode">
      <span ng-show="$ctrl.announcements.estimatedWaitMessage.operatingMode === 'Position'">
        Announce Queue Position
      </span>
      <span ng-show="$ctrl.announcements.estimatedWaitMessage.operatingMode === 'Time'">
        Announce Wait Time
      </span>
    </pbs-list-item>
    <pbs-list-item label="Maximum Position"
      ng-show="$ctrl.announcements.estimatedWaitMessage.operatingMode === 'Position'">
      {{ $ctrl.announcements.estimatedWaitMessage.maximumPositions }} or Lower in Queue
    </pbs-list-item>
    <pbs-list-item label="Play High Volume Message"
      ng-show="$ctrl.announcements.estimatedWaitMessage.operatingMode === 'Position'">
      <pbs-check-box checked="$ctrl.announcements.estimatedWaitMessage.playPositionHighVolume"></pbs-check-box>
    </pbs-list-item>
    <pbs-list-item label="Maximum Waiting Minutes"
      ng-show="$ctrl.announcements.estimatedWaitMessage.operatingMode === 'Time'">
      {{ $ctrl.announcements.estimatedWaitMessage.maximumWaitingMinutes }} Minutes or Lower
    </pbs-list-item>
    <pbs-list-item label="Play High Volume Message"
      ng-show="$ctrl.announcements.estimatedWaitMessage.operatingMode === 'Time'">
      <pbs-check-box checked="$ctrl.announcements.estimatedWaitMessage.playTimeHighVolume"></pbs-check-box>
    </pbs-list-item>
    <pbs-list-item label="Default Handling Time"
      ng-show="$ctrl.announcements.estimatedWaitMessage.operatingMode === 'Time'">
      {{ $ctrl.announcements.estimatedWaitMessage.defaultCallHandlingMinutes }} Minutes
    </pbs-list-item>
  </pbs-list>
</pbs-block>
<pbs-modal id="editGroupCallCenterAnnouncementsEstimatedWaitMessage"
  title="{{ $ctrl.modalTitle }}">

  <pbs-form-field label="Estimated Wait Enabled">
    <label class="checkbox">
      <input type="checkbox"
        ng-model="$ctrl.editAnnouncements.estimatedWaitMessage.enabled"> Play Estimated Wait Message
    </label>
  </pbs-form-field>

  <pbs-form-field label="Updated Estimated Wait Enabled">
    <label class="checkbox">
      <input type="checkbox"
        ng-model="$ctrl.editAnnouncements.estimatedWaitMessage.playUpdatedEWM"> Play Updated Estimated Wait Message
    </label>
  </pbs-form-field>


  <pbs-form-field label="Seconds between Updated Messages"
    ng-show="$ctrl.editAnnouncements.estimatedWaitMessage.playUpdatedEWM">
    <input type="number"
      class="input"
      ng-model="$ctrl.editAnnouncements.estimatedWaitMessage.timeBetweenEWMUpdatesSeconds"
      min="{{ $ctrl.options.timeBetweenEWMUpdatesSeconds.min }}"
      max="{{ $ctrl.options.timeBetweenEWMUpdatesSeconds.max }}">
  </pbs-form-field>

  <pbs-form-field label="Operating Mode">
    <div class="select">
      <select ng-model="$ctrl.editAnnouncements.estimatedWaitMessage.operatingMode"
        ng-options="opt.key as opt.description for opt in $ctrl.options.operatingMode"></select>
    </div>
  </pbs-form-field>

  <pbs-form-field label="Play Message at Position or Lower"
    ng-show="$ctrl.editAnnouncements.estimatedWaitMessage.operatingMode === 'Position'">
    <input type="number"
      class="input"
      ng-model="$ctrl.editAnnouncements.estimatedWaitMessage.maximumPositions"
      min="{{ $ctrl.options.maximumPositions.min }}"
      max="{{ $ctrl.options.maximumPositions.max }}">
  </pbs-form-field>


  <pbs-form-field label="High Volume"
    ng-show="$ctrl.editAnnouncements.estimatedWaitMessage.operatingMode === 'Position'">
    <label class="checkbox">
      <input type="checkbox"
        ng-model="$ctrl.editAnnouncements.estimatedWaitMessage.playPositionHighVolume"> Play High Volume Message
    </label>
  </pbs-form-field>

  <pbs-form-field label="Play Message at Minutes or Lower"
    ng-show="$ctrl.editAnnouncements.estimatedWaitMessage.operatingMode === 'Time'">
    <input type="number"
      class="input"
      ng-model="$ctrl.editAnnouncements.estimatedWaitMessage.maximumWaitingMinutes"
      min="{{ $ctrl.options.maximumPositions.min }}"
      max="{{ $ctrl.options.maximumPositions.max }}">
  </pbs-form-field>

  <pbs-form-field label="High Volume"
    ng-show="$ctrl.editAnnouncements.estimatedWaitMessage.operatingMode === 'Time'">
    <label class="checkbox">
      <input type="checkbox"
        ng-model="$ctrl.editAnnouncements.estimatedWaitMessage.playTimeHighVolume"> Play High Volume Message
    </label>
  </pbs-form-field>

  <pbs-form-field label="Default Minutes Handling Time"
    ng-show="$ctrl.editAnnouncements.estimatedWaitMessage.operatingMode === 'Time'">
    <input type="number"
      class="input"
      ng-model="$ctrl.editAnnouncements.estimatedWaitMessage.defaultCallHandlingMinutes"
      min="{{ $ctrl.options.maximumPositions.min }}"
      max="{{ $ctrl.options.maximumPositions.max }}">
  </pbs-form-field>
</pbs-modal>
